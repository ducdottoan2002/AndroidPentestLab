# AndroidPentestLab
Doing lab 4 WEB AND APPLICATION SECURITY COURSE

## **1. Introduce**
* Learn how to crack an android app!!

## **2. Tools**
* ByteCode-Viewer 2.11.2
* apktool
* frida-server
* Xposed Framework
* ...


## **3. Writeup for lab**
### **3.1. challenge2_release.apk**
Reverse and crack the app to get pin/flag
<p align="center">
  <img src="FridaLab/FindPin.png" height="40%" width="40%">
</p>

#### **a. Reversing the apk:**
<p align="center">
  <img src="FridaLab/MainActivityClass.png" height="75%" width="75%">
</p>

* The variable cipherText is assigned the value of Hex().decode() of a hexadecimal string.
* After input 6-length pin, the PIN is passed into the native function `getKey(string)`:
<p align="center">
  <img src="FridaLab/PinLock.png" height="75%" width="75%">
</p>

#### **b. Hooking by Frida**
* We can use Frida to hook this native function and brute-force to get cipherText but the `getKey(string)` function only allows 51 attempts for input.

  Therefore, you need to combine it with the resetCooldown function in the native library to reset the count to 0 when it reaches 50.

### **3.2. BroadcastReceiver Exploiting**
* Create project:
<p align="center">
  <img src="image\createExploitApp.png" height="75%" width="75%">
</p>

* Code Exploitation:
<p align="center">
  <img src="image\ExploitationCode.png" height="75%" width="75%">
</p>
